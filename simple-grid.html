<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
	<meta name="author" content="Corey Birnbaum" />
	<title>Grid</title>

	<style>
		body {
			overflow: hidden;
		}

		#view {
			position: absolute;
			top: 0;
			left: 0;
		}
	</style>
</head>

<body>

	<canvas id="view"></canvas>

	<script type="text/javascript" src="./libs/three.min.js"></script>
	<script type="text/javascript" src="./libs/OrbitalControls.js"></script>

	<script type="text/javascript" src="./libs/von-grid/vg.js"></script>
	<script type="text/javascript" src="./libs/von-grid/Tools.js"></script>
	<script type="text/javascript" src="./libs/von-grid/grids/Cell.js"></script>
	<script type="text/javascript" src="./libs/von-grid/grids/SqrGrid.js"></script>
	<script type="text/javascript" src="./libs/von-grid/grids/Tile.js"></script>
	<script type="text/javascript" src="./libs/von-grid/Board.js"></script>


	<script type="text/javascript">
		//**********************************
		// init THREE.js functions
		//**********************************
		//scenes
		let canvas = document.getElementById('view');
		let scene = new THREE.Scene();

		//renderer
		let renderer = new THREE.WebGLRenderer({
			antialias: true,
			canvas: canvas,
			alpha: true
		});
		renderer.setSize(window.innerWidth, window.innerHeight);

		//camera
		let camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
		camera.position.set(0, 150, 150);
		camera.lookAt(0, 0, 0);

		//controls
		var controls = new THREE.OrbitControls(camera, canvas);
		controls.update();

		//window resize
		window.addEventListener('resize', onWindowResize, false);
		function onWindowResize() {
			var width = window.innerWidth;
			var height = window.innerHeight;
			camera.aspect = width / height;
			camera.updateProjectionMatrix();
			renderer.setSize(width, height);
		}



		//lights
		let directionalLight = new THREE.DirectionalLight(0xffffff);
		directionalLight.position.set(-1, 1, -1).normalize();
		scene.add(directionalLight);

		//geometry
		let geometry = new THREE.IcosahedronGeometry(10, 0);
		let material = new THREE.MeshStandardMaterial({ color: 0xff0000 });
		let cube = new THREE.Mesh(geometry, material);
		scene.add(cube);


		var grid = new vg.SqrGrid({ cellSize: 11 });
		grid.generate({ size: 5 });

		var board = new vg.Board(grid);
		board.generateTilemap({ tileScale: 0.96 });

		scene.add(board.group);

		//render loop
		function animate() {
			requestAnimationFrame(animate);

			/////////////////
			// Custom
			/////////////////

			//orbital controls
			controls.update();
			renderer.render(scene, camera);
		}
		animate();
	</script>
</body>

</html>